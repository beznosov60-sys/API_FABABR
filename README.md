# КАД Трекер (Vue 3 SPA)

Платформа на Vue 3 для отслеживания судебных процессов через API [kad.arbitr.ru](https://kad.arbitr.ru/). Приложение позволяет искать дела по различным параметрам, открывать детальную карточку, просматривать историю событий и скачивать PDF-документы.

## Стек
- Vue 3 (Composition API)
- Vite
- vue-router
- pinia
- axios

## Быстрый старт
1. Установите зависимости:
   ```bash
   npm install
   ```
2. Создайте файл `.env` в корне (пример ниже) и укажите ключ API и базовый URL.
3. Запустите dev-сервер:
   ```bash
   npm run dev
   ```
4. Перейдите по адресу, указанному Vite (по умолчанию `http://localhost:5173`).

## Переменные окружения
Файл `.env` должен содержать:
```
VITE_KAD_API_KEY=61ae42aaf113c0c31fb4e3a5da572173
VITE_KAD_API_URL=https://kad.arbitr.ru/
```

## Структура проекта
- `src/main.js` — инициализация приложения, подключение Pinia и маршрутизатора.
- `src/router/index.js` — маршруты поиска и карточки дела.
- `src/stores/cases.js` — состояние поиска, карточки и событий дела через Pinia.
- `src/services/kadApi.js` — обертка над API КАД с автоматической подстановкой ключа.
- `src/views/CaseSearchView.vue` — поиск дел и вывод списка результатов.
- `src/views/CaseDetailView.vue` — карточка дела, таймлайн событий и скачивание PDF.
- `src/components/*` — UI-компоненты (форма поиска, список дел, карточка, таймлайн).
- `src/styles/main.css` — базовые стили и цвета интерфейса.

## Основные сценарии
- **Поиск дел** — фильтры по номеру, ИНН, названию стороны, диапазону дат, типу дела, суду.
- **Карточка дела** — стороны (ИНН/ОГРН/адрес), статус, судья, тип, календарь заседаний, документы.
- **История событий** — даты, типы событий, комментарии, суммы исков, инициатор, ссылки на документы.
- **Скачивание PDF** — кнопка "Скачать PDF" использует эндпоинт `/pdf?key=...&url=...`.

## Примеры API-запросов
> API kad.arbitr.ru использует ключ, передаваемый как параметр `key`.

- Поиск дел (POST):
  - `POST https://kad.arbitr.ru/kadapi/v1.0/search` c телом
    ```json
    {
      "Page": 1,
      "Count": 20,
      "CaseNumber": "А40-123456/2025",
      "DateFrom": "2025-01-01",
      "DateTo": "2025-12-31",
      "Inn": "7701234567",
      "Courts": ["АС города Москвы"],
      "Type": "bankruptcy"
    }
    ```
- Карточка дела (GET): `GET https://kad.arbitr.ru/kadapi/v1.0/card?CaseNumber=А40-123456/2025&key=...`
- События (GET): `GET https://kad.arbitr.ru/kadapi/v1.0/card/events?CaseNumber=А40-123456/2025&key=...`
- PDF-документ (GET): `GET https://kad.arbitr.ru/pdf?url=https://kad.arbitr.ru/PdfDocument/...&key=...`

## Важные замечания
- Ключ подставляется автоматически через `import.meta.env.VITE_KAD_API_KEY` в axios-инстансе.
- В `services/kadApi.js` предусмотрен безопасный демо-ответ, если API недоступно (для работы без сети).
- Для продакшн-сборки используйте `npm run build`, предпросмотр — `npm run preview`.

## Ссылки на API КАД
- Официальный портал: https://kad.arbitr.ru/
- Пример описания методов: https://kad.arbitr.ru/KadApi/help

